(this.webpackJsonpReactMedium=this.webpackJsonpReactMedium||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),o=a.n(r),l=(a(10),a(2)),s=(a(11),function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}),i=function(){return fetch("/session",{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return s(e)}))},u=function(e){return fetch("/blogs/".concat(e),{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},m=a(1);var d=function(){return c.a.createElement("div",{className:"Profile White-card Grid-rows Gap-one"},c.a.createElement("div",{className:"Profile-pic"},c.a.createElement("i",{className:"fa fa-medium Profile-logo"})),c.a.createElement("div",{className:"Profile-info"},c.a.createElement("h3",null,c.a.createElement("span",{className:"profile-info-header"},"ReactMedium ")," We do things differently."),c.a.createElement("div",null,"ReactMedium is not like any other platform on the internet. Its sole purpose is to help you find compelling ideas, knowledge, and perspectives. We don\u2019t serve ads\u2014we serve you, the curious reader who loves to learn new things. ReactMedium is home to thousands of independent voices, and we combine humans and technology to find the best reading for you\u2014and filter out the rest.")))};var f=function(e){var t=e.blogs,a=e.isAdmin,r=Object(n.useContext)(N),o=Object(l.a)(r,2),s=o[0],i=o[1],d={weekday:"long",year:"numeric",month:"long",day:"numeric"},f=t.map((function(e){var t;return c.a.createElement("div",{className:"Blogs-item Grid-rows Black-card Gap-half",key:e.blogId,"data-id":e.blogId,onClick:function(t){return n=e.blogId,void u(n).then((function(e){i(Object(m.a)(Object(m.a)({},s),{},{nav:a?"Admin":"Blog",blog:e.data}))})).catch((function(e){i(Object(m.a)(Object(m.a)({},s),{},{error:e.message}))}));var n}},c.a.createElement("div",null,e.title),c.a.createElement("div",{className:"Blogs-user Grid-cols Gap-quarter"},c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-user"}),c.a.createElement("b",null," ",null===(t=e.user)||void 0===t?void 0:t.username)),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-clock-o"})," ",new Date(e.timestamp).toLocaleDateString("en-US",d))),c.a.createElement("div",{className:"Blogs-text"},e.text))}));return c.a.createElement("div",{className:"Blogs White-card Grid-rows Gap-half"},c.a.createElement("h3",{className:"Center"},c.a.createElement("i",{className:"fa fa-rss"})," Recent Blog Posts"),c.a.createElement("div",{className:"Grid-rows Gap-one"},f))};var b=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"Social White-card Grid-cols Gap-one"},c.a.createElement("div",null,c.a.createElement("b",null,"\xa9 Copyright 2020 ")),c.a.createElement("div",{className:"Social-icons Grid-cols Gap-one"},c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-linkedin"})),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-twitter"})),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-github"}))),c.a.createElement("div",null,c.a.createElement("button",{className:"Btn Btn-success",onClick:function(){i().then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!0,nav:"Admin",username:e.data.username,userId:e.data.userId}))})).catch((function(){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!1,nav:"Login"}))}))}},c.a.createElement("i",{className:"fa fa-unlock"})," Admin")))};var j=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),u=Object(l.a)(o,2),j=u[0],g=u[1];Object(n.useEffect)((function(){i().then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!0,username:e.data.username,userId:e.data.userId}))})).catch((function(){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!1}))})),h()}),[]);var h=function(){fetch("/blogs",{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return s(e)})).then((function(e){g(e.data.slice(0,4))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))}))};return c.a.createElement("div",{className:"Grid-rows Gap-one"},c.a.createElement("div",{className:"Home-body Grid Gap-one"},c.a.createElement(d,null),c.a.createElement(f,{blogs:j})),c.a.createElement("div",{className:"Home-footer"},c.a.createElement(b,null)))};var g=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(),s=Object(l.a)(o,2),i=s[0],u=s[1],d=Object(n.useState)(),f=Object(l.a)(d,2),b=f[0],j=f[1];return c.a.createElement("div",{className:"Login Grid-cols Gap-one"},c.a.createElement("div",{className:"Grid White-card Gap-one"},c.a.createElement("div",{className:"Login-pic"},c.a.createElement("i",{className:"fa fa-user-circle Login-logo"})),c.a.createElement("div",{className:"Login-info Grid-rows"},c.a.createElement("label",{for:"username"},"Username",c.a.createElement("span",{className:"Info-danger"},"*")),c.a.createElement("input",{type:"text",id:"username",onChange:function(e){return u(e.target.value)},className:"Form-control",placeholder:"Enter username here"}),c.a.createElement("label",{for:"password"},"Password",c.a.createElement("span",{className:"Info-danger"},"*")),c.a.createElement("input",{type:"password",id:"password",onChange:function(e){return j(e.target.value)},className:"Form-control",placeholder:"Enter password here"}),c.a.createElement("button",{className:"Btn Btn-success",onClick:function(){i&&i.trim()?b&&b.trim()?function(e){return fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(i).then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Admin",loggedIn:!0,username:e.data.username,userId:e.data.userId}))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))})):r(Object(m.a)(Object(m.a)({},a),{},{error:"Password is required."})):r(Object(m.a)(Object(m.a)({},a),{},{error:"Username is required."}))}},c.a.createElement("i",{className:"fa fa-sign-in"})," Login"))))};var h=function(){var e,t=Object(n.useContext)(N),a=Object(l.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){i().then((function(e){o(Object(m.a)(Object(m.a)({},r),{},{loggedIn:!0,username:e.data.username,userId:e.data.userId}))})).catch((function(){o(Object(m.a)(Object(m.a)({},r),{},{loggedIn:!1}))})),s()}),[]);var s=function(){u(r.blog.blogId).then((function(e){o(Object(m.a)(Object(m.a)({},r),{},{blog:e.data}))})).catch((function(e){o(Object(m.a)(Object(m.a)({},r),{},{error:e.message}))}))};return c.a.createElement("div",{className:"Blog Grid-rows Gap-one"},c.a.createElement("div",{className:"Blog-item White-card Grid-rows Gap-one"},c.a.createElement("div",null,r.blog.title),c.a.createElement("div",{className:"Blogs-user Grid-cols Gap-quarter"},c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-user"}),c.a.createElement("b",null," ",null===(e=r.blog.user)||void 0===e?void 0:e.username)),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-clock-o"})," ",new Date(r.blog.timestamp).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),c.a.createElement("div",{className:"Blog-item-text White-card"},c.a.createElement("div",null,r.blog.text)))};var E=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(l.a)(o,2),u=s[0],d=s[1];Object(n.useEffect)((function(){i().then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!0,username:e.data.username,userId:e.data.userId}))})).catch((function(){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!1}))})),b()}),[]);var b=function(){var e;(e=a.userId,fetch("/blogs/user/".concat(e),{method:"GET"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){d(e.data),e.data.length>0?e.data.some((function(e){var t;return e.blogId===(null===(t=a.blog)||void 0===t?void 0:t.blogId)}))||r(Object(m.a)(Object(m.a)({},a),{},{blog:e.data[0]})):r(Object(m.a)(Object(m.a)({},a),{},{blog:void 0}))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))}))},j=function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"AddEditBlog",isNewBlog:!0}))};return c.a.createElement("div",null,u.length>0&&c.a.createElement("div",{className:"Admin Grid Gap-one"},c.a.createElement(f,{blogs:u,isAdmin:!0}),c.a.createElement("div",{className:"Admin-area Grid-rows Gap-one"},c.a.createElement("div",{className:"Admin-menu Black-card Grid-cols Gap-one"},c.a.createElement("div",{onClick:function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"AddEditBlog",isNewBlog:!1}))}},c.a.createElement("i",{className:"fa fa-pencil"})," Edit"),c.a.createElement("div",{onClick:function(){var e,t;(e=a.userId,t=a.blog.blogId,fetch("/blogs/user/".concat(e,"/").concat(t),{method:"DELETE"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(){r(Object(m.a)(Object(m.a)({},a),{},{blog:void 0})),b()})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))}))}},c.a.createElement("i",{className:"fa fa-trash"})," Delete"),c.a.createElement("div",{onClick:j},c.a.createElement("i",{className:"fa fa-plus"})," New")),a.blog&&c.a.createElement(h,null))),0===u.length&&c.a.createElement("h3",null,c.a.createElement("center",null,"Click ",c.a.createElement("span",{className:"Link-new",onClick:j},"here")," to create a new blog.")))};var v=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{class:"Nav"},c.a.createElement("a",{href:"javascript:void(0);",onClick:function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Home"}))}},c.a.createElement("i",{className:"fa fa-home"})," Home"),a.loggedIn&&"Admin"!==a.nav&&c.a.createElement("a",{href:"javascript:void(0);",onClick:function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Admin"}))}},c.a.createElement("i",{className:"fa fa-users"})," Admin"),a.loggedIn&&c.a.createElement("a",{className:"logout",href:"javascript:void(0);",onClick:function(){fetch("/session",{method:"DELETE"}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))})).then((function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Login",loggedIn:!1,blog:void 0,userId:void 0,username:void 0}))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))}))}},c.a.createElement("i",{className:"fa fa-sign-out"})," Logout"),a.loggedIn&&c.a.createElement("p",{className:"welcome"},c.a.createElement("i",{className:"fa fa-user-o"})," Hello, ",a.username))};var O=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){setTimeout((function(){r(Object(m.a)(Object(m.a)({},a),{},{error:void 0}))}),2e3)}),[]),c.a.createElement("div",{className:"Growl"},c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-times"}),"\xa0",a.error))};var p=function(){var e=Object(n.useContext)(N),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)({title:"",text:""}),s=Object(l.a)(o,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){i().then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{loggedIn:!0,username:e.data.username,userId:e.data.userId})),a.blog&&!a.isNewBlog&&d(a.blog)})).catch((function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Home",loggedIn:!1}))}))}),[]),c.a.createElement("div",{className:"AddEditBlog White-card Grid-rows Gap-one"},c.a.createElement("div",{className:"AddEditBlog-menu Black-card Grid-cols Gap-one"},c.a.createElement("div",{onClick:function(){u.title&&u.title.trim()?u.text&&u.text.trim()?a.isNewBlog?function(e,t){return fetch("/blogs/user/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blog:t})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(a.userId,u).then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Admin",blog:e.data.blog}))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))})):function(e,t){return fetch("/blogs/user/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({blog:t})}).catch((function(e){return e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(a.userId,u).then((function(e){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Admin",blog:e.data.blog}))})).catch((function(e){r(Object(m.a)(Object(m.a)({},a),{},{error:e.message}))})):r(Object(m.a)(Object(m.a)({},a),{},{error:"Please enter a valid blog text."})):r(Object(m.a)(Object(m.a)({},a),{},{error:"Please enter a valid blog title."}))}},c.a.createElement("i",{className:"fa fa-floppy-o"})," Save"),c.a.createElement("div",{onClick:function(){r(Object(m.a)(Object(m.a)({},a),{},{nav:"Admin"}))}},c.a.createElement("i",{className:"fa fa-arrow-left"})," Cancel")),c.a.createElement("div",{className:"Grid-rows"},c.a.createElement("label",{for:"title"},"Title",c.a.createElement("span",{className:"Info-danger"},"*")),c.a.createElement("input",{id:"title",defaultValue:u.title,onKeyUp:function(e){d(Object(m.a)(Object(m.a)({},u),{},{title:e.target.value}))},className:"Form-control",placeholder:"Enter title here"})),c.a.createElement("div",{className:"Grid-rows"},c.a.createElement("label",{for:"text"},"Text",c.a.createElement("span",{className:"Info-danger"},"*")),c.a.createElement("textarea",{id:"text",rows:"18",defaultValue:u.text,onKeyUp:function(e){d(Object(m.a)(Object(m.a)({},u),{},{text:e.target.value}))},className:"Form-control",placeholder:"Enter text here"})))};var N=Object(n.createContext)({}),w=function(){var e=Object(n.useState)({nav:"Home",loggedIn:!1}),t=Object(l.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"App Grid-rows Gap-one"},c.a.createElement(N.Provider,{value:[a,r]},a.error&&c.a.createElement(O,null),"Home"===a.nav&&c.a.createElement(j,null),"Home"!==a.nav&&c.a.createElement(v,null),"Login"===a.nav&&c.a.createElement(g,null),"Blog"===a.nav&&c.a.createElement(h,null),"Admin"===a.nav&&c.a.createElement(E,null),"AddEditBlog"===a.nav&&c.a.createElement(p,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.0ca1a47f.chunk.js.map